--- a/config_io.py
+++ b/config_io.py
@@ -6,25 +6,29 @@
 
 
 def save_config(config, path):
-	if hasattr(config, "__dict__"):
-		data = {k: getattr(config, k) for k in vars(config).keys()}
-	elif isinstance(config, dict):
-		data = dict(config)
-	else:
-		data = {}
-	ext = os.path.splitext(path)[1].lower()
-	if ext in (".yml", ".yaml"):
-		try:
-			import yaml
-			with open(path, "w") as f:
-				yaml.safe_dump(data, f, sort_keys=True)
-		except Exception:
-			with open(path, "w") as f:
-				json.dump(data, f, indent=2, sort_keys=True)
-	else:
-		with open(path, "w") as f:
-			json.dump(data, f, indent=2, sort_keys=True)
-	return path
+        if hasattr(config, "__dict__"):
+                data = {k: getattr(config, k) for k in vars(config).keys()}
+        elif isinstance(config, dict):
+                data = dict(config)
+        else:
+                data = {}
+        dirn = os.path.dirname(path)
+        if dirn and not os.path.isdir(dirn):
+                os.makedirs(dirn, exist_ok=True)
+        ext = os.path.splitext(path)[1].lower()
+        if ext in (".yml", ".yaml"):
+                try:
+                        import yaml
+                        with open(path, "w") as f:
+                                yaml.safe_dump(data, f, sort_keys=True)
+                except Exception:
+                        with open(path, "w") as f:
+                                json.dump(data, f, indent=2, sort_keys=True)
+        else:
+                with open(path, "w") as f:
+                        json.dump(data, f, indent=2, sort_keys=True)
+        return path
+
 def load_config(path):
 	ext = os.path.splitext(path)[1].lower()
 	if ext in (".yml", ".yaml"):
